<!DOCTYPE html><html dir="rtl"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title class="jsx-3212841288">آپاچی کافکا</title><meta name="next-head-count" content="3"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous"/><link rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/3bdb22000a33fbd6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3bdb22000a33fbd6.css" data-n-g=""/><link rel="preload" href="/_next/static/css/f266cd59e090fa0c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f266cd59e090fa0c.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-114634acb84f8baa.js" defer=""></script><script src="/_next/static/chunks/main-673a4fae4a27af6a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-78a051c38553426e.js" defer=""></script><script src="/_next/static/chunks/996-c5e5aa4c30f33066.js" defer=""></script><script src="/_next/static/chunks/857-b47e4468e46433a5.js" defer=""></script><script src="/_next/static/chunks/466-d8da54d40024e3cc.js" defer=""></script><script src="/_next/static/chunks/pages/note/%5Btitle%5D-7d2cf073dbbe8226.js" defer=""></script><script src="/_next/static/amDncjymexWbyup1xvcMw/_buildManifest.js" defer=""></script><script src="/_next/static/amDncjymexWbyup1xvcMw/_ssgManifest.js" defer=""></script><style id="__jsx-3212841288">.cardHeader.jsx-3212841288{background:url(/_next/static/media/header.8d53fe0d.png)#4d1933;height:120px;text-align:center;-webkit-border-radius:15px 15px 0 0;-moz-border-radius:15px 15px 0 0;border-radius:15px 15px 0 0;background-position:center;-webkit-background-size:500px;-moz-background-size:500px;-o-background-size:500px;background-size:500px;margin-bottom:40px}</style></head><body><div id="__next"><div style="background:url(/_next/static/media/header.8d53fe0d.png) #4d1933;background-size:950px" class="jsx-3212841288 note_background__RQH1i"><div class="navbar_navbar__NDFN3 _navbar"><div class="container-fluid nav"><ul><li> <a class="navbar_navLink__iRnns" href="/">صفحه ی اصلی</a> </li><li> <a class="navbar_navLink__iRnns" href="/category">دسته بندی ها</a> </li><li> <a class="navbar_navLink__iRnns" href="/resume">رزومه</a> </li></ul></div></div><div class="jsx-3212841288 container"><div class="jsx-3212841288 row"><div class="jsx-3212841288 col-md-8"><div class="jsx-3212841288 note_card__oGU9m note_meduimFont__yRcxR"><img src="/images/68761914265556cb71d47aacb6d8474d.png" class="jsx-3212841288 note_card_img__1ZZvJ"/><div class="jsx-3212841288 note_title__npIjl"><h2 class="jsx-3212841288">آپاچی کافکا</h2><p class="jsx-3212841288">۱۴۰۱/۱۲/۱۱</p><p class="jsx-3212841288">در این نوشته خواهید خواند:</p><div class="jsx-3212841288 note_title__tags__YlihY"><ul class="jsx-3212841288"><li class="jsx-3212841288"><a class="link" href="/note/%D8%A2%D9%BE%D8%A7%DA%86%DB%8C_%DA%A9%D8%A7%D9%81%DA%A9%D8%A7#%D9%BE%DB%8C%D8%B4%DA%AF%D9%81%D8%AA%D8%A7%D8%B1">پیشگفتار</a></li><li class="jsx-3212841288"><a class="link" href="/note/%D8%A2%D9%BE%D8%A7%DA%86%DB%8C_%DA%A9%D8%A7%D9%81%DA%A9%D8%A7#%DB%8C%DA%A9%20%D8%B3%D9%86%D8%A7%D8%B1%DB%8C%D9%88%DB%8C%20%D8%B3%D8%A7%D8%AF%D9%87">یک سناریوی ساده</a></li><li class="jsx-3212841288"><a class="link" href="/note/%D8%A2%D9%BE%D8%A7%DA%86%DB%8C_%DA%A9%D8%A7%D9%81%DA%A9%D8%A7#%D9%85%D8%B9%D8%B1%D9%81%DB%8C%20Apache%20Kafka">معرفی Apache Kafka</a></li><li class="jsx-3212841288"><a class="link" href="/note/%D8%A2%D9%BE%D8%A7%DA%86%DB%8C_%DA%A9%D8%A7%D9%81%DA%A9%D8%A7#%D8%A8%D8%A7%D8%B2%D8%AF%D9%87%DB%8C%20%D9%88%20%DA%A9%D8%A7%D8%B1%D8%A7%DB%8C%DB%8C">بازدهی و کارایی</a></li><li class="jsx-3212841288"><a class="link" href="/note/%D8%A2%D9%BE%D8%A7%DA%86%DB%8C_%DA%A9%D8%A7%D9%81%DA%A9%D8%A7#%D8%B3%D8%A7%D8%AE%D8%AA%D8%A7%D8%B1">ساختار</a></li><li class="jsx-3212841288"><a class="link" href="/note/%D8%A2%D9%BE%D8%A7%DA%86%DB%8C_%DA%A9%D8%A7%D9%81%DA%A9%D8%A7#%D9%85%D8%B9%D9%85%D8%A7%D8%B1%DB%8C%20%D9%85%DB%8C%DA%A9%D8%B1%D9%88%D8%B3%D8%B1%D9%88%DB%8C%D8%B3">معماری میکروسرویس</a></li></ul></div></div><div class="jsx-3212841288 around"><h3 id="پیشگفتار" style="margin:10px">پیشگفتار</h3><div style="margin:20px"><p>بین خیلی از سیستم های messageing که توی بازار موجود هست <b>kafka </b>احتمالا بهترین گزینه برای این کار بحساب میاد. هرچند گزینه های دیگه ای هم هست که شاید توی بعضی از ویژگی ها از kafka بهتر باشه ولی از نظر تنوع ویژگی و خیلی مسایل دیگه احتمالا kafka بهترین باشه.</p></div><h3 id="یک سناریوی ساده" style="margin:10px">یک سناریوی ساده</h3><div style="margin:20px"><p>معماری میکروسرویس یعنی چند برنامه که با هم هماهنگ هستن و تحت یک بستر به هم پیام میدن.</p><p>تصور کنید که یک سرور دارید که یک سامانه ی پیچیده هست و ویژگی های زیادی داره. این سامانه از 9 میکروسرویس تشکیل شده که هرکدوم کار یک ویژگی از سرور رو برعهده دارند.</p><p>عین این 9 تا میکروسرویس باید یک قسمت یا بستر برای ورود و خروج داده هماهنگ با بقیه سرویس ها داشته باشن.حالا اینطوری میشه که 9 تا میکروسرویس هر کدومشون یک سرور rest هستن و بستر تبادل پیامشون این حالت هست.</p><p>این حالت کلاسیک هست. منسوخ نیست و بقول بعضی از خبره های نرم افزار anti pattern یا ضد الگو نیست. اما ، روش های دیگه ای هم هست. روش هایی که میتونه بعضی حفره های این روش رایجی که گفتم رو پرکنه. برای مثال اگر یک request برای سرویسی که سرش خیلی شلوغ بود بره و هیچ وقت جوابی برنگرده ، احتمال اخلال رو توی کل سامانه ایجاد میکنه.</p><p>یکی از این روش های دیگه ، وجود یک سرویس مجزا برای تبادل پیام بین سرویس ها هست. سرویسی که بدونه حال و روز سرویس فرستنده و گیرنده چطوریه و آیا مثلا پیام رو دریافت کرده. یا همین سرویس مدیریت پیام ها بین بقیه سرویس ها میتونه از پس تعداد بالایی از پیام های بین سرویس ها بربیاد.</p><p>یه مثال بین برنامه نویس ها وجود داره که میگه :<b>وقت مهمه ، لزومی نداره که برگردیم به 6 هزار سال پیش و چرخ رو دوباره اختراع کنیم. اگر مشکلی که قبلا وجود داشته رو یکی حل کرده خب ما هم راه حل اون رو ادامه میدیم.</b></p><p>برای messaging بین سرویس ها قبلا نرم افزار هایی ساخته شده. یکی از معروف ترین اون ها <i><b>Apache Kafka</b></i> هست که بقول معروف جز دسته بندی message broker ها یا همون دلال های پیام هست. نرم افزاری که پیام ها رو بین سرویس ها به مدتی که برای تعیین میکنید، آرشیو میکنه. میتونه برای سرویس ها احراز هویت و رمزنگاری پیام ها رو انجام بده و سرعتش به قدری بالاست که میلیون ها پیام رو در مقیاس ثانیه میتونه رد و بدل کنه.</p></div><h3 id="معرفی Apache Kafka" style="margin:10px">معرفی Apache Kafka</h3><div style="margin:20px"><p>آپاچی کافکا یک نرم افزار پیامرسان بین نرم افزار های یک سامانه هست. کافکا به زبان جاوا نوشته شده ، قابلیت cluster شدن را دارد و از نرم افزار zookeeper بهره میبرد و میتواند میلیون ها پیام را در بازه ثانیه ارسال و دریافت کند.</p><p>کافکا یک message broker هست. به این معنا که اگر مبدا پیامی را به مقصد ارسال کند در صورت عدم دریافت پیام توسط مقصد آن پیام منتظر بازگشت مقصد به شبکه کافکا خواهد ماند.</p></div><h3 id="بازدهی و کارایی" style="margin:10px">بازدهی و کارایی</h3><div style="margin:20px"><p>نرم افزار های دیگری مشابه کافکا موجود هست که اصلی ترین رقیب کافکا سیستمی به نام rabbitmq هست. کافکا با توجه به الگویی که دارد میتواند میلیون ها پیام را رد و بدل کند درحالی که این رقم برای نرم افزار rabbitmq چیزی حدود 45 هزار پیام بر ثانیه است.اما rabbitmq برای سیستم های پیچیده حالت بهتری را فراهم میکند.</p></div><h3 id="ساختار" style="margin:10px">ساختار</h3><div style="margin:20px"><p>ساختار کافکا به این شکل هست که برنامه های دیگر یا نرم افزار ها به آن متصل هستند. این نرم افزار ها پیام های خودشان را به در موجودیت هایی به نام <b>topic</b> قرار میدهند. همچنین سیستم های متصل به شبکه کافکا میتوانند پیام های درج شده در یک topic را دریافت کنند.</p><p>آن جزء خارجی متصل به شبکه کافکا که بخواهد در تاپیک پیام بگذارد <b>Producer </b>یا تامین کننده نام دارد و آن جزء که بخواهد پیام های یک تاپیک را بخواند <b>Consumer</b> نام دارد.</p></div><h3 id="معماری میکروسرویس" style="margin:10px">معماری میکروسرویس</h3><div style="margin:20px"><p>در معماری میکروسرویس ، گاها یک جز از سیستم برای رساندن یک پیام به جز دیگر از روش های سنتی ای استفاده میکنند که ممکن هست به اقتضای کار متناسب آن کار باشد.</p><p>برای مثال یک سامانه با ساختار میکروسرویس داریم که قسمت وب سرور آن پیامی را از کاربر خارجی دریافت میکند و برای پردازش باید به سرویس دیگری ارسال کند.</p><p>یک روش سنتی این کار call کردن هست. به این صورت که هر جز از سیستم باید یک وب سرور باشند و باقی سیستم ها بتوانند از طریق rest برای آنها داده ارسال کنند و منتظر پاسخ باشند.</p><p>روش کافکا اینطور هست که آن جز از سیستم که api خارجی دارد تامین کننده تاپیک آن جز دیگر سیستم هست که پیام های تاپیک خود را مصرف میکند.</p></div></div></div></div><div class="jsx-3212841288 col-md-4"><div class="jsx-3212841288 note_category_card__Wcgk_"><img src="/images/e322708e13d5f1ca222cb6408e0cb870.png" alt="" class="jsx-3212841288"/><h2 class="jsx-3212841288">معرفی نرم افزار</h2><p class="jsx-3212841288">آشنایی با سیستم ها و نرم افزار های حوزه برنامه نویسی</p></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"a472dda153ed771d","title":"آپاچی کافکا","content":[{"header":"h3","text":"پیشگفتار","id":"f8cbfbe4","type":"title"},{"richtext":[{"content":[{"text":"بین خیلی از سیستم های messageing که توی بازار موجود هست ","style":{"weight":[]}},{"text":"kafka ","style":{"weight":["BOLD"]}},{"text":"احتمالا بهترین گزینه برای این کار بحساب میاد. هرچند گزینه های دیگه ای هم هست که شاید توی بعضی از ویژگی ها از kafka بهتر باشه ولی از نظر تنوع ویژگی و خیلی مسایل دیگه احتمالا kafka بهترین باشه.","style":{"weight":[]}}]}],"id":"e15f348d","type":"caption"},{"header":"h3","text":"یک سناریوی ساده","id":"b2dcf8db","type":"title"},{"richtext":[{"content":[{"text":"معماری میکروسرویس یعنی چند برنامه که با هم هماهنگ هستن و تحت یک بستر به هم پیام میدن.","style":{"weight":[]}}]},{"content":[{"text":"تصور کنید که یک سرور دارید که یک سامانه ی پیچیده هست و ویژگی های زیادی داره. این سامانه از 9 میکروسرویس تشکیل شده که هرکدوم کار یک ویژگی از سرور رو برعهده دارند.","style":{"weight":[]}}]},{"content":[{"text":"عین این 9 تا میکروسرویس باید یک قسمت یا بستر برای ورود و خروج داده هماهنگ با بقیه سرویس ها داشته باشن.حالا اینطوری میشه که 9 تا میکروسرویس هر کدومشون یک سرور rest هستن و بستر تبادل پیامشون این حالت هست.","style":{"weight":[]}}]},{"content":[{"text":"این حالت کلاسیک هست. منسوخ نیست و بقول بعضی از خبره های نرم افزار anti pattern یا ضد الگو نیست. اما ، روش های دیگه ای هم هست. روش هایی که میتونه بعضی حفره های این روش رایجی که گفتم رو پرکنه. برای مثال اگر یک request برای سرویسی که سرش خیلی شلوغ بود بره و هیچ وقت جوابی برنگرده ، احتمال اخلال رو توی کل سامانه ایجاد میکنه.","style":{"weight":[]}}]},{"content":[{"text":"یکی از این روش های دیگه ، وجود یک سرویس مجزا برای تبادل پیام بین سرویس ها هست. سرویسی که بدونه حال و روز سرویس فرستنده و گیرنده چطوریه و آیا مثلا پیام رو دریافت کرده. یا همین سرویس مدیریت پیام ها بین بقیه سرویس ها میتونه از پس تعداد بالایی از پیام های بین سرویس ها بربیاد.","style":{"weight":[]}}]},{"content":[{"text":"یه مثال بین برنامه نویس ها وجود داره که میگه :","style":{"weight":[]}},{"text":"وقت مهمه ، لزومی نداره که برگردیم به 6 هزار سال پیش و چرخ رو دوباره اختراع کنیم. اگر مشکلی که قبلا وجود داشته رو یکی حل کرده خب ما هم راه حل اون رو ادامه میدیم.","style":{"weight":["BOLD"]}}]},{"content":[{"text":"برای messaging بین سرویس ها قبلا نرم افزار هایی ساخته شده. یکی از معروف ترین اون ها ","style":{"weight":[]}},{"text":"Apache Kafka","style":{"weight":["ITALIC","BOLD"]}},{"text":" هست که بقول معروف جز دسته بندی message broker ها یا همون دلال های پیام هست. نرم افزاری که پیام ها رو بین سرویس ها به مدتی که برای تعیین میکنید، آرشیو میکنه. میتونه برای سرویس ها احراز هویت و رمزنگاری پیام ها رو انجام بده و سرعتش به قدری بالاست که میلیون ها پیام رو در مقیاس ثانیه میتونه رد و بدل کنه.","style":{"weight":[]}}]}],"id":"95b63746","type":"caption"},{"header":"h3","text":"معرفی Apache Kafka","id":"ae54db07","type":"title"},{"richtext":[{"content":[{"text":"آپاچی کافکا یک نرم افزار پیامرسان بین نرم افزار های یک سامانه هست. کافکا به زبان جاوا نوشته شده ، قابلیت cluster شدن را دارد و از نرم افزار zookeeper بهره میبرد و میتواند میلیون ها پیام را در بازه ثانیه ارسال و دریافت کند.","style":{"weight":[]}}]},{"content":[{"text":"کافکا یک message broker هست. به این معنا که اگر مبدا پیامی را به مقصد ارسال کند در صورت عدم دریافت پیام توسط مقصد آن پیام منتظر بازگشت مقصد به شبکه کافکا خواهد ماند.","style":{"weight":[]}}]}],"id":"533ece2e","type":"caption"},{"header":"h3","text":"بازدهی و کارایی","id":"8a541b8e","type":"title"},{"richtext":[{"content":[{"text":"نرم افزار های دیگری مشابه کافکا موجود هست که اصلی ترین رقیب کافکا سیستمی به نام rabbitmq هست. کافکا با توجه به الگویی که دارد میتواند میلیون ها پیام را رد و بدل کند درحالی که این رقم برای نرم افزار rabbitmq چیزی حدود 45 هزار پیام بر ثانیه است.اما rabbitmq برای سیستم های پیچیده حالت بهتری را فراهم میکند.","style":{"weight":[]}}]}],"id":"0dc07bf5","type":"caption"},{"header":"h3","text":"ساختار","id":"3e95eec2","type":"title"},{"richtext":[{"content":[{"text":"ساختار کافکا به این شکل هست که برنامه های دیگر یا نرم افزار ها به آن متصل هستند. این نرم افزار ها پیام های خودشان را به در موجودیت هایی به نام ","style":{"weight":[]}},{"text":"topic","style":{"weight":["BOLD"]}},{"text":" قرار میدهند. همچنین سیستم های متصل به شبکه کافکا میتوانند پیام های درج شده در یک topic را دریافت کنند.","style":{"weight":[]}}]},{"content":[{"text":"آن جزء خارجی متصل به شبکه کافکا که بخواهد در تاپیک پیام بگذارد ","style":{"weight":[]}},{"text":"Producer ","style":{"weight":["BOLD"]}},{"text":"یا تامین کننده نام دارد و آن جزء که بخواهد پیام های یک تاپیک را بخواند ","style":{"weight":[]}},{"text":"Consumer","style":{"weight":["BOLD"]}},{"text":" نام دارد.","style":{"weight":[]}}]}],"id":"70f25cf1","type":"caption"},{"header":"h3","text":"معماری میکروسرویس","id":"7b19c85f","type":"title"},{"richtext":[{"content":[{"text":"در معماری میکروسرویس ، گاها یک جز از سیستم برای رساندن یک پیام به جز دیگر از روش های سنتی ای استفاده میکنند که ممکن هست به اقتضای کار متناسب آن کار باشد.","style":{"weight":[]}}]},{"content":[{"text":"برای مثال یک سامانه با ساختار میکروسرویس داریم که قسمت وب سرور آن پیامی را از کاربر خارجی دریافت میکند و برای پردازش باید به سرویس دیگری ارسال کند.","style":{"weight":[]}}]},{"content":[{"text":"یک روش سنتی این کار call کردن هست. به این صورت که هر جز از سیستم باید یک وب سرور باشند و باقی سیستم ها بتوانند از طریق rest برای آنها داده ارسال کنند و منتظر پاسخ باشند.","style":{"weight":[]}}]},{"content":[{"text":"روش کافکا اینطور هست که آن جز از سیستم که api خارجی دارد تامین کننده تاپیک آن جز دیگر سیستم هست که پیام های تاپیک خود را مصرف میکند.","style":{"weight":[]}}]}],"id":"e3e48e43","type":"caption"}],"author":1,"createAt":"1677785071540","tag":[],"photo":"68761914265556cb71d47aacb6d8474d.png","category":{"id":"90b1d846797174fa","label":"معرفی نرم افزار","admin":1,"description":"آشنایی با سیستم ها و نرم افزار های حوزه برنامه نویسی","color":"#4d1933","avatar":"e322708e13d5f1ca222cb6408e0cb870.png","parent":"487df254edf343cb","notes":[{"title":"آپاچی کافکا","tag":[],"author":1,"photo":"68761914265556cb71d47aacb6d8474d.png","category":"90b1d846797174fa","id":"a472dda153ed771d","createAt":"1677785071540"},{"title":"اپلیکیشن مدیریت زمان","tag":[],"author":1,"photo":"33894347ac8d9145aba50073fb7bc48c.png","category":"90b1d846797174fa","id":"78ba8400bfd21fa6","createAt":"1677783936936"}]}}},"__N_SSG":true},"page":"/note/[title]","query":{"title":"آپاچی_کافکا"},"buildId":"amDncjymexWbyup1xvcMw","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>