{"pageProps":{"note":{"id":"6c1177b4-eaa0-4d8f-99f5-9a9986c5ddbf","title":"راهی به اسم nextjs","content":[{"richtext":[],"url":"http://localhost:31375/photo/68876b23d89aed97c0c57b5a0cf7c60a.jpeg","id":"de7bbd8f","type":"photo"},{"richtext":[{"content":[{"text":"یه زمانی علاقه زیادی به شطرنج نشون میدادم و یه اپ که هوش مصنوعی خوبیم داشت رو روی گوشیم نصب داشتم. اون هوش مصنوعی مشاوره میداد و بهم استراتژی پیشنهاد میداد. آخرش که کلافه شده بود گفت : ","style":{"weight":[]}},{"text":"شاید تو به مساله باید یجور دیگه نگاه کنی!","style":{"weight":["BOLD"]}}]}],"id":"ac7382c5","type":"caption"},{"header":"h3","text":"پیش گفتار","id":"f5c6b432","type":"title"},{"richtext":[{"content":[{"text":"nextjs یک فریم ورک node.js هست که به مساله اساسی کار نرم افزار ینی performance یجور دیگه نگاه میکنه نگاه next اینه ","style":{"weight":[]}},{"text":"حداقل استفاده از backend و حفظ داده های دریافت شده.","style":{"weight":["BOLD"]}}]}],"id":"a12b805f","type":"caption"},{"header":"h3","text":"سناریوی بدون راه حل","id":"631a8e14","type":"title"},{"richtext":[{"content":[{"text":"توی کتابخانه react وقتی که سمت فرانت میخاد یک داده ای رو دریافت کنه از سرور میگیره و نمایشش میده ینی تصور کنید 100 کاربر آنلاین که 100 درخواست که با هم از نظر محتوا فرقیم ندارن با برنامه های ری اکت به سرور درخواست میدن و جوابش رو صرفا فرانت مرتب سازی میکنه و نمایش میده.","style":{"weight":[]}}]},{"content":[{"text":"برای مثال یک سایت بلاگ (عین همینی که هست) برای 100 کاربر دیگه قراره همین متن و محتوا نمایش داده بشه. پس چه فرقی با یک فایل html خام میتونه داشته باشه.","style":{"weight":[]}}]},{"content":[{"text":"یک مثال دیگه ؛ فکر کنید شمای برنامه نویس یک کتابخانه ایجاد کردید که برای نحوه کار این کتابخانه لازم هست یه سری داکیومنت تهیه کنید. و شاید این کتابخانه یکبار برای همیشه نوشته شده و مستندات همین یکبار ایجاد خواهند شد.","style":{"weight":[]}}]},{"content":[{"text":"توی این نمونه هایی که گفتم react مناسب این کار نیست. معماری میکروسرویس یا قوی ترین سرور ها برای کارهای دیگه ای باید استفاده بشن ولی برای این کار ساختن html css بهتر باید باشه.","style":{"weight":[]}}]},{"content":[{"text":"تصور کنید react اینطوری باشه که شما طوری بنویسید که بره یکبار همه اون دیتا ها رو از backend برداره و توی اون component ها جاگذاری کنه بعد از روشون html و css خام ایجاد کنه!","style":{"weight":[]}}]},{"content":[{"text":"این کاری هستش که nextjs انجام میده ولی نه فقط همین یک کار رو.","style":{"weight":[]}}]}],"id":"d6f28ec1","type":"caption"},{"header":"h3","text":"تشریح کلی","id":"a3c906ef","type":"title"},{"richtext":[{"content":[{"text":"کد همون کد react هست . ینی میشه همون امکاناتی که توی react بود رو توی nextjs هم داشت. برای مثال redux رو میشه توی next هم داشت. ویژگی خیلی مثبتی که next داره اینه که دیگه نیازی به router نیست و با ترتیبی که فایل های component داخل page ها دارن همونطوری مسیریابی میشه.","style":{"weight":[]}}]},{"content":[{"text":"توی این فریمورک باید به روش functional کد های react پیاده بشه چون هر page یک سری تابع رو باید به عنوان خروجی تحویل فریمورک بده.","style":{"weight":[]}}]},{"content":[{"text":"سیستم next توی سه فاز قرار میگیره","style":{"weight":[]}}]},{"content":[{"text":"dev:","style":{"weight":["BOLD"]}},{"text":" حالتی که برای برنامه نویس ها هست ینی همون حالت توسعه یا دیباگ که کدهایی رو که میزنید به hotreload به همراه اشکلات و غیره میبینید.","style":{"weight":[]}}]},{"content":[{"text":"build:","style":{"weight":["BOLD"]}},{"text":" حالتی که کد هایی که نوشته شده ایجاد میشن و خروجی قطعی به حساب میان. تو این زمان با ارسال درخواست ها به backend محتوا ها و فایل های خام ایجاد میشن . ینی html ,و css و js خام رو با محتوای دریافتی از backend پرشده شده ایجاد میشه. وب سرور next در پاسخ request ها اون فایل html خام رو ارسال میکنه.","style":{"weight":[]}}]},{"content":[{"text":"export: ","style":{"weight":["BOLD"]}},{"text":" این حالت همان حالت build حساب میاد فقط خروجی دیگه برای اجرا نیازی به وب سرور next نداره و فایل های خام هستن.","style":{"weight":[]}}]},{"content":[{"text":"شاید یه سوال پیش بیاد که چرا همیشه از export بجای build استفاده نکنیم. و سوالی هست که جوابش رو میدم...","style":{"weight":[]}}]}],"id":"e2db6011","type":"caption"},{"header":"h3","text":"نقاط ضعف nextjs","id":"4c6f7f7a","type":"title"},{"richtext":[{"content":[{"text":"nextjs ایجاد نشده که بتونه react یا vue.js یا بقیه این سیستم ها رو از رده خارج کنه. چون نمیشه عملکردش رو با این دسته از کتابخانه ها یا فریمورک ها مقایسه کرد.","style":{"weight":[]}}]},{"content":[{"text":"فریمورک nextjs برای سناریو های خاصی طراحی شده که قبلا هم توضیح داده شد. اگر پروژه شما ساختن یک سیستم مثل توییتر هست یا میخواید یک سامانه داشته باشید که هر لحظه در حال آپدیت شدن یا بروز رسانی داده هاش از سمت backend هست احتمالا nextjs گزینه ی خوبی برای پیاده سازی اینطور سیستم ها نیست.","style":{"weight":[]}}]},{"content":[{"text":"یک فروشگاه اینترنتی رو میشه با nextjs ساخت. فروشگاهی که مثلا محصولات نمایش  داده میشن و ممکنه آپدیت هایی هم توی مشخصاتش اتفاق بیوفته. یا برای مثال محصول جدیدی اضافه بشه یا محصول دیگه ای حدف بشه.","style":{"weight":[]}}]},{"content":[{"text":"نمیشه برای هر آپدیت یکبار از سیستم export گرفت ولی میشه با یکبار build گرفتن حالتی به وجود بیاد که نسبت به backend نظری داشته باشه و اگر تغییری اتفاق افتاد بجای build کلی فقط همون قسمتی که تغییر شده دوباره rebuild بشه.","style":{"weight":[]}}]},{"content":[{"text":"یک کد رو مثال میزنم:","style":{"weight":[]}}]}],"id":"4087e5de","type":"caption"},{"text":"\nconst Home = ({products}: Props) => {\n  return <>{\n    products.map((product)=><ProductCard data={product}/>)\n  }</>\n}\n\ninterface Props {\n  products: Products[]\n}\n\nexport const getStaticProps: GetStaticProps<Props> = async () => {\n  const products = await api.get(\"http://backend.io/producets\");\n  return {\n    props: {\n      products: products,\n    },\n    revalidate: 1\n  }\n}\n\nexport default Home;","id":"5fa6d47d","type":"code"},{"richtext":[{"content":[{"text":"علاقه ی من typescript هست ، چون توسعه پذیری بهتری نسبت به javascript  داره. در مجموع این دوتا تفاوت چندانی ندارن.","style":{"weight":["BOLD","ITALIC"]}}]}],"id":"75cfaf75","type":"frame"},{"richtext":[{"content":[{"text":"یک تابع export شده به اسم getStaticProps که این تابع در زمان build اجرا میشه. میاد و همون داده ها رو از سرور میگیره و توی مقدار جاگذاری میکنه. به اون قسمت revalidate اگر دقت کنید این معنی رو میده که این صفحه ینی لیست محصولات 1 دقیقه اعتبار داره.","style":{"weight":[]}}]},{"content":[{"text":"کاربر میاد و داده های قدیمی رو میبینه و سرور میره و نوسازی انجام میده ، کاربر بعدی که بیاد و این صفحه رو ببینه داده های جدید که از سرور دریافت شده رو میبینه. و این داده ها 1 دقیقه اعتبار داره.","style":{"weight":[]}}]}],"id":"e297c59a","type":"caption"},{"header":"h3","text":"نتیجه گیری","id":"152cd143","type":"title"},{"richtext":[{"content":[{"text":"nextjs گسترده هست و توی یک نوشته نمیشه کاملا توضیحش داد اما امکانات جالبی داره که باعث شده تا برای بعضی سناریو ها انتخاب بهتری بحساب بیاد.","style":{"weight":[]}}]},{"content":[{"text":"سازگاری بیشتر با سئو نسبت به react و کاهش شدید request ها به سرور باعث میشه تا توی این دسته سناریو ها انتخاب خوبی باشه...","style":{"weight":[]}}]}],"id":"7acd76ac","type":"caption"},{"richtext":[{"content":[{"text":"همین بلاگ با nextjs ایجاد شده. کد این بلاگ هم به صورت متن باز در اکانت گیت هاب موجود هست.","style":{"weight":[]}}]}],"url":"http://localhost:31375/photo/9f3f7db7d93f6aadc00cfb06981b58cb.png","id":"d29b5c26","type":"photo"}],"author":1,"createAt":"1676587461231","tag":[],"category":{"id":"09ae92b9-ff31-41e3-be66-c3519775a853","label":"دنیای node.js","admin":1,"description":"نوشته های مربوط به مباحث نود جی اس ، فریم ورک ها ، کتابخانه های آن ","avatar":"b568390d649f2d3bdc87f26f9c3c882a.png","color":"#40862d","_id":"63bfcc12d5c3ef370090fcde","notes":[{"id":"b98a71cf-71b0-4613-b75e-bafe7c9a5a39","title":"متن بسته های node.js","author":1,"createAt":"1676759668256","tag":[],"category":"09ae92b9-ff31-41e3-be66-c3519775a853"},{"id":"6c1177b4-eaa0-4d8f-99f5-9a9986c5ddbf","title":"راهی به اسم nextjs","author":1,"createAt":"1676587461231","tag":[],"category":"09ae92b9-ff31-41e3-be66-c3519775a853"}]}}},"__N_SSG":true}