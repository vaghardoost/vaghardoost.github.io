{"pageProps":{"note":{"title":"مثال معماری میکروسرویس","content":[{"content":[{"content":[{"text":"معماری میکروسرویس تعریف های زیادی داره که یکیش تقسیم یک برنامه بزرگ به  چند برنامه هماهنگ با هم و یکپارچه هست. نمونه کدی رو نوشتم که میتونه یک  مثال خوب برای این تعریف باشه.","style":{"weight":[]}}]}],"id":"6d21edf3","type":"caption"},{"header":"h3","text":"سناریو","id":"c932697d","type":"title","align":"start"},{"content":[{"content":[{"text":"کاری که این سیستم انجام میده اینه که یک سری محصول یا product رو میگیره ، ذخیره میکنه و موجودی خودشو نشون میده.","style":{"weight":[]}}]},{"content":[{"text":"به ساده ترین شکل ممکن نوشته شده و از اضافه کردن role و احراز هویت و این صحبت ها هم به دلیل حفظ سادگی و تسریع زمان صرف نظر شده.","style":{"weight":[]}}]},{"content":[{"text":"نمونه  کدی که نوشتم تحت فریم ورک nestjs ایجاد شده. یعنی از حالت های کلاسیک و  عادی فاصله داره و ساختار مربوط به خودشو داره. تو این کد سعی کردم بیشتر  معماری میکروسرویس رو براساس ساختار nestjs توضیح بدم. ","style":{"weight":[]}}]}],"id":"5e18df7e","type":"caption"},{"header":"h3","text":"توضیح ساختار","id":"bb3283a9","type":"title","align":"start"},{"content":[{"content":[{"text":"برای درک این مثال ، نیاز هست که شما با نرم افزار Kafka و فریم ورک nestjs آشنایی داشته باشید.","style":{"weight":[]}}]},{"content":[{"text":"توی این مثال هم از redis هم استفاده شده که اگر آشنایی ندارید میشه از داخل همین مثال هم متوجه اون شد.","style":{"weight":[]}}]},{"content":[{"text":"برای پایگاه داده های این مثال هم از mongodb استفاده شده.","style":{"weight":[]}}]},{"content":[{"text":"بستر  اجرای مثال هم با docker پیاده سازی شده که کار کردن با اون به هیچ وجه  سخت نیست. هرچند میشه بدون docker هم این مثال رو اجرا کرد اما استفاده از  docker خیلی مهم شده و تقریبا اکثر نرم افزار ها برای پیشتیبانی و مدیریت  بهتر منابع سرور ها با docker اجرا میشن.","style":{"weight":[]}}]}],"id":"20e0d6ea","type":"caption"},{"content":[],"url":"http://localhost:31375/photo/818cce0145fceee77e5d2397cca0135b.png","id":"7d6ce261","type":"photo"},{"content":[{"content":[{"text":"میکروسرویس های این سیستم با استفاده از فریمورک nestjs ساخته شده. این  میکروسرویس ها هرکدوم عهده دار یک ویژگی هستن. هرکدوم ازین میکروسرویس ها  رو جداگانه معرفی میکنم و توضیح میدم.","style":{"weight":[]}}]}],"id":"b5969dac","type":"caption"},{"header":"h3","text":"Rest Api Gate (دریافت کننده اصلی)","id":"911853b1","type":"title","align":"start"},{"content":[{"content":[{"text":"البته از دیدگاه فریمورک nestjs یک nest  server application بحساب میاد. کار این قسمت که حالا میکروسرویس باشه یا  نباشه اینه که داده دریافت میکنه و به اقتضای نوع داده و محل دریافت داده  اونو برای میکروسرویس مربوط ارسال میکنه.","style":{"weight":[]}}]},{"content":[{"text":"هر میکروسرویس توی این  دریافت کننده اصطلاحا نمایندگی داره. ینی توی کنترلر اصلی ، جایی که سرور  پیام دریافت میکنه فوری برای میکروسرویس مربوط بهش ارسال میشه و جواب هم  بدون هیچ تغییر از سمت سرور برگردونده میشه.","style":{"weight":[]}}]},{"content":[{"text":"البته ممکنه احراز هویتی  اگر بخاد وجود داشته باشه توی همین قسمت اتفاق میوفته ، اما ، اعتبارسنجی  داده های ورودی که توی همین مثال هست هم توی سرور انجام میشه که اطمینان  باشه که سرور داره داده درست و معتبر به میکروسرویس میفرسته.","style":{"weight":[]}}]}],"id":"ee4e0812","type":"caption"},{"header":"h3","text":"Writer Service (سرویس نویسنده)","id":"bd11c9e8","type":"title","align":"start"},{"content":[{"content":[{"text":"کار این سرویس فقط همینه که داده ای که سرور  دریافت کرده و براش فرستاده رو توی پایگاه داده ی مشترک ذخیره کنه. این  داده هم توی پایگاه داده ذخیره میشه و هم به صورت خلاصه توی redis ذخیره  میشه.","style":{"weight":[]}}]},{"content":[{"text":"دلیل اینکه چرا از redis استفاده میشه هم اینه که redis داده  رو روی ram ذخیره میکنه و سرعت بیشتری در خوندن و نوشتن داده ها ، نسبت به  هارد دیسک ها و ssd داره.","style":{"weight":[]}}]}],"id":"1abd11d4","type":"caption"},{"header":"h3","text":"Reader Service (سرویس خواننده)","id":"8aaefcf8","type":"title","align":"start"},{"content":[{"content":[{"text":"این سرویس هم نقش خوندن داده ها رو برعهده داره ینی جایی که مثلا کاربرها  میخان محصولات رو ببینن و میان و سرور rest برای این میکروسرویس درخواست  میفرسته که مثلا همه یا یکی از محصولات رو نشون بده و سرویس هم از روی  redis این کار رو انجام میده که سرعت بیشتری پیدا کنه.","style":{"weight":[]}}]}],"id":"e3e403d7","type":"caption"},{"header":"h3","text":"سایر اجزاء","id":"266b803d","type":"title","align":"start"},{"content":[{"content":[{"text":"بین این سرویس ها و سرور rest که توسط برنامه نویسی ساخته شده ","style":{"weight":[]}},{"text":"(خودمو میگم)","style":{"weight":["ITALIC"]}},{"text":" ، این سیستم از یه سری از اجزای دیگه هم استفاده کرده. که اگر قسمت های  بالا تر رو خونده باشید از kafka برای پیام رسانی بین سرویس ها ، از redis  برای ذخیره سازی داده های پر استفاده و کم حجم و از mongodb هم به عنوان  پایگاه داده های کلی سیستم استفاده شده.","style":{"weight":[]}}]},{"content":[{"text":"استفاده از اون هم به صورت  یک image هست که داخل docker hub قرار داره. به وسیله ابزار docker compose  که بسیار جالب و کاربردی هم هست. تمام دستوراتی که شما توی shell باید  بزنید رو به صورت مرتب و معنا دار و منظم تر داخل یک فایل با فرمت yml  میارید و خود compose اقدام به اعمال اون روی engine داکر میکنه و کار ها  رو بسیار سریع تر میکنه.","style":{"weight":[]}}]}],"id":"ddd792ac","type":"caption"},{"header":"h3","text":"نتیجه گیری","id":"30635699","type":"title","align":"start"},{"content":[{"content":[{"text":"این یک مثال هست که بشدت ساده هست اما بخاطر  معماری میکروسرویس توسعه پذیری بالایی پیدا کرده ینی همین کدهای مثال و  ساده رو میشه به راحتی توسعه داد و به سمت یک سیستم معنا دار هدایت کرد.","style":{"weight":[]}}]},{"content":[{"text":"از  یه طرف وجود داکر هم توی این قصه بی تاثیر نیست چون میشه منابع رو کنترل  کرد سرویس ها رو با ترتیب و نظم ایجاد و مدیریت کرد و توی مساله  performance بسیاری از مشکلات رو  برطرف کرد.","style":{"weight":[]}}]}],"id":"cbb3b223","type":"caption"}],"author":"645b942ad412792a214b1177","namespace":"64ae7b316730ddb96b37c6fb","tag":["معماری ","میکروسرویس","نرم افزار"],"category":{"label":"مهندسی نرم افزار","author":"645b942ad412792a214b1177","description":"روش های مختلف برنامه نویسی و توسعه نرم افزار","color":"#233b48","avatar":"http://localhost:31375/64ae7b316730ddb96b37c6fb/photo/demo.64d5f27208efd4d7b4e8abb0.png","namespace":"64ae7b316730ddb96b37c6fb","parent":"64d4ce0abed03dc8b207ba64","id":"64d5eff8983c9b5efb48799c","notes":[{"title":"redis پایگاه داده روی رم","author":"645b942ad412792a214b1177","namespace":"64ae7b316730ddb96b37c6fb","tag":[],"category":"64d5eff8983c9b5efb48799c","photo":"http://localhost:31375/64ae7b316730ddb96b37c6fb/photo/64d8ceefa9964af6b53adfba.png","id":"64d8ce2e42d55f88a06365c7"},{"title":"آپاچی کافکا","author":"645b942ad412792a214b1177","namespace":"64ae7b316730ddb96b37c6fb","tag":[],"photo":"http://localhost:31375/64ae7b316730ddb96b37c6fb/photo/64d8cef6a9964af6b53adfc9.png","category":"64d5eff8983c9b5efb48799c","id":"64d8cdb042d55f88a06365bd"},{"title":"چرا کارم با جاوا تمام شد","author":"645b942ad412792a214b1177","namespace":"64ae7b316730ddb96b37c6fb","tag":["جاوا","برنامه نویسی","java","backend"],"category":"64d5eff8983c9b5efb48799c","photo":"http://localhost:31375/64ae7b316730ddb96b37c6fb/photo/64d8cef3a9964af6b53adfc7.jpeg","id":"64d8ce1442d55f88a06365c5"},{"title":"چرا باید از docker  استفاده کرد؟","author":"645b942ad412792a214b1177","namespace":"64ae7b316730ddb96b37c6fb","tag":["داکر","مهندسی نرم افزار","مدیریت اجرا"],"photo":"http://localhost:31375/64ae7b316730ddb96b37c6fb/photo/64d5f29e08efd4d7b4e8abb2.png","category":"64d5eff8983c9b5efb48799c","id":"64d5f7ad983c9b5efb4879a0"},{"title":"ایده پردازی","author":"645b942ad412792a214b1177","namespace":"64ae7b316730ddb96b37c6fb","tag":["برنامه نویسی","اپلیکیشن"],"category":"64d5eff8983c9b5efb48799c","photo":"http://localhost:31375/64ae7b316730ddb96b37c6fb/photo/64e3497aa0f078b0e357aea3.jpg","id":"64e13932702b2c4eb1e792b1"},{"title":"مقیاس توسعه پذیری","author":"645b942ad412792a214b1177","namespace":"64ae7b316730ddb96b37c6fb","tag":["داستان کوتاه","توسعه نرم افزار"],"photo":"http://localhost:31375/64ae7b316730ddb96b37c6fb/photo/64e211b23afc01b048c96d48.png","category":"64d5eff8983c9b5efb48799c","id":"64e20ce5995e1b122a0392b1"},{"title":"فرانت را دستکم نگیرید","author":"645b942ad412792a214b1177","namespace":"64ae7b316730ddb96b37c6fb","tag":[],"category":"64d5eff8983c9b5efb48799c","photo":"http://localhost:31375/64ae7b316730ddb96b37c6fb/photo/64d8d1c8a9964af6b53adfcd.jpeg","id":"64d8cdfc42d55f88a06365c3"},{"title":"مثال معماری میکروسرویس","author":"645b942ad412792a214b1177","namespace":"64ae7b316730ddb96b37c6fb","tag":["معماری ","میکروسرویس","نرم افزار"],"category":"64d5eff8983c9b5efb48799c","photo":"http://localhost:31375/64ae7b316730ddb96b37c6fb/photo/64d8cb96a9964af6b53adfa9.jpeg","id":"64d8cb1b42d55f88a06365aa"}]},"photo":"http://localhost:31375/64ae7b316730ddb96b37c6fb/photo/64d8cb96a9964af6b53adfa9.jpeg","id":"64d8cb1b42d55f88a06365aa"}},"__N_SSG":true}